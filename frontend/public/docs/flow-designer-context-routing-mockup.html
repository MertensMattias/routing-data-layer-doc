<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flow Designer - Context Routing Mockup</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f5f6fa;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #7f8c8d;
            margin-bottom: 30px;
        }

        .layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            height: calc(100vh - 150px);
        }

        .canvas {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 40px;
            position: relative;
            overflow: auto;
        }

        .side-panel {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 24px;
            overflow-y: auto;
        }

        .side-panel.hidden {
            opacity: 0.3;
        }

        .side-panel h2 {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .side-panel h3 {
            font-size: 14px;
            color: #7f8c8d;
            margin: 20px 0 12px 0;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* Node Styles */
        .node {
            border: 2px solid #3498db;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.2s;
            position: absolute;
        }

        .node:hover {
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
            transform: translateY(-2px);
        }

        .node.selected {
            border-color: #2980b9;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .node-header {
            background: #3498db;
            color: white;
            padding: 12px 16px;
            border-radius: 6px 6px 0 0;
            font-weight: 600;
            font-size: 14px;
        }

        .node-type {
            font-size: 11px;
            opacity: 0.9;
            margin-top: 2px;
        }

        .node-body {
            padding: 12px 16px;
        }

        .transition-item {
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 4px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .transition-item:hover {
            background: #e9ecef;
        }

        .transition-item.selected {
            background: #d4e6f1;
            border-left: 3px solid #3498db;
        }

        .transition-item.context-routing {
            background: linear-gradient(135deg, #fff5e6 0%, #ffe8cc 100%);
            border-left: 3px solid #f39c12;
        }

        .transition-item.context-routing:hover {
            background: linear-gradient(135deg, #ffe8cc 0%, #ffd699 100%);
        }

        .transition-item.context-routing.selected {
            background: linear-gradient(135deg, #ffd699 0%, #ffc266 100%);
            box-shadow: 0 2px 4px rgba(243, 156, 18, 0.2);
        }

        .transition-label {
            font-weight: 600;
            color: #2c3e50;
        }

        .context-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: #f39c12;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .arrow {
            color: #95a5a6;
            font-weight: bold;
        }

        /* Side Panel Styles */
        .info-row {
            padding: 10px 0;
            border-bottom: 1px solid #ecf0f1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .info-label {
            color: #7f8c8d;
            font-size: 13px;
            font-weight: 500;
        }

        .info-value {
            color: #2c3e50;
            font-size: 13px;
            font-weight: 600;
        }

        .context-route {
            background: #fff;
            border: 2px solid #f39c12;
            border-radius: 6px;
            padding: 12px;
            margin: 8px 0;
            transition: all 0.2s;
        }

        .context-route:hover {
            border-color: #e67e22;
            box-shadow: 0 2px 6px rgba(243, 156, 18, 0.2);
        }

        .context-route.default {
            border-color: #95a5a6;
            background: #f8f9fa;
        }

        .context-key {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #e67e22;
            font-size: 13px;
            margin-bottom: 6px;
        }

        .context-route.default .context-key {
            color: #7f8c8d;
        }

        .context-target {
            color: #2c3e50;
            font-size: 14px;
            padding-left: 24px;
        }

        .icon {
            font-size: 16px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #95a5a6;
        }

        .empty-state .icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        /* Connection Lines */
        .connection {
            position: absolute;
            pointer-events: none;
        }

        .connection-line {
            stroke: #3498db;
            stroke-width: 2;
            fill: none;
        }

        .connection-line.context {
            stroke: #f39c12;
            stroke-dasharray: 5, 5;
        }

        .connection-arrow {
            fill: #3498db;
        }

        .connection-arrow.context {
            fill: #f39c12;
        }

        /* Badges and Tags */
        .tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            background: #ecf0f1;
            color: #7f8c8d;
        }

        .tag.warning {
            background: #fff3cd;
            color: #856404;
        }

        /* Instructions */
        .instructions {
            background: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 16px;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .instructions h3 {
            color: #2c3e50;
            font-size: 14px;
            margin: 0 0 8px 0;
            text-transform: none;
            letter-spacing: normal;
        }

        .instructions p {
            color: #5d6d7e;
            font-size: 13px;
            line-height: 1.6;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Flow Designer - Context Routing UI Mockup</h1>
        <p class="subtitle">Interactive demo showing nested context routing visualization</p>

        <div class="instructions">
            <h3>üí° How to Use:</h3>
            <p>Click on the <strong>PREMIUM üîÄ (4)</strong> transition in the Intent Router node to see the nested context routing details in the side panel.</p>
        </div>

        <div class="layout">
            <!-- Main Canvas -->
            <div class="canvas">
                <svg width="100%" height="600" style="position: absolute; top: 0; left: 0; pointer-events: none;">
                    <!-- Connection lines -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" class="connection-arrow" />
                        </marker>
                        <marker id="arrowhead-context" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                            <polygon points="0 0, 10 3, 0 6" class="connection-arrow context" />
                        </marker>
                    </defs>
                    
                    <!-- Intent Router to Context Switch (PREMIUM - dashed) -->
                    <path d="M 240 150 Q 320 150 320 220" class="connection-line context" marker-end="url(#arrowhead-context)"/>
                    
                    <!-- Intent Router to Standard Flow -->
                    <path d="M 240 180 Q 320 180 400 240" class="connection-line" marker-end="url(#arrowhead)"/>
                    
                    <!-- Context Switch to target nodes -->
                    <path d="M 420 310 Q 500 340 580 370" class="connection-line context" marker-end="url(#arrowhead-context)"/>
                    <path d="M 420 340 Q 500 370 580 430" class="connection-line context" marker-end="url(#arrowhead-context)"/>
                    <path d="M 420 370 Q 500 400 580 490" class="connection-line context" marker-end="url(#arrowhead-context)"/>
                </svg>

                <!-- Node 1: Start -->
                <div class="node" style="left: 40px; top: 40px; width: 180px;">
                    <div class="node-header">
                        Start
                        <div class="node-type">get_language</div>
                    </div>
                    <div class="node-body">
                        <div class="transition-item">
                            <span class="transition-label">nl-BE</span>
                            <span class="arrow">‚Üí</span>
                        </div>
                        <div class="transition-item">
                            <span class="transition-label">fr-BE</span>
                            <span class="arrow">‚Üí</span>
                        </div>
                        <div class="transition-item">
                            <span class="transition-label">default</span>
                            <span class="arrow">‚Üí</span>
                        </div>
                    </div>
                </div>

                <!-- Node 2: Intent Router (Main) -->
                <div class="node selected" style="left: 40px; top: 220px; width: 200px;" id="intentRouterNode">
                    <div class="node-header">
                        Intent Router
                        <div class="node-type">intent</div>
                    </div>
                    <div class="node-body">
                        <div class="transition-item context-routing selected" id="premiumTransition">
                            <span class="transition-label">PREMIUM</span>
                            <span class="context-badge">
                                <span class="icon">üîÄ</span>
                                <span>(4)</span>
                            </span>
                        </div>
                        <div class="transition-item">
                            <span class="transition-label">STANDARD</span>
                            <span class="arrow">‚Üí</span>
                        </div>
                        <div class="transition-item">
                            <span class="transition-label">BASIC</span>
                            <span class="arrow">‚Üí</span>
                        </div>
                    </div>
                </div>

                <!-- Node 3: Context Switch (Semi-transparent) -->
                <div class="node" style="left: 320px; top: 220px; width: 180px; opacity: 0.7;">
                    <div class="node-header" style="background: #f39c12;">
                        Context Switch
                        <div class="node-type">customerType</div>
                    </div>
                    <div class="node-body" style="padding: 16px; text-align: center; color: #7f8c8d; font-size: 12px;">
                        Routing based on<br/>runtime context
                    </div>
                </div>

                <!-- Node 4: Standard Flow -->
                <div class="node" style="left: 400px; top: 240px; width: 180px;">
                    <div class="node-header">
                        Standard Flow
                        <div class="node-type">menu</div>
                    </div>
                </div>

                <!-- Target Nodes (from context switch) -->
                <div class="node" style="left: 580px; top: 370px; width: 180px; opacity: 0.7;">
                    <div class="node-header" style="background: #e67e22;">
                        Residential Flow
                        <div class="node-type">menu</div>
                    </div>
                </div>

                <div class="node" style="left: 580px; top: 430px; width: 180px; opacity: 0.7;">
                    <div class="node-header" style="background: #e67e22;">
                        Professional Flow
                        <div class="node-type">menu</div>
                    </div>
                </div>

                <div class="node" style="left: 580px; top: 490px; width: 180px; opacity: 0.7;">
                    <div class="node-header" style="background: #e67e22;">
                        Enterprise Flow
                        <div class="node-type">menu</div>
                    </div>
                </div>
            </div>

            <!-- Side Panel -->
            <div class="side-panel" id="sidePanel">
                <h2>
                    <span class="icon">üîÄ</span>
                    Context Routing Details
                </h2>

                <div class="info-row">
                    <span class="info-label">Edge Type</span>
                    <span class="info-value">Context Routing</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Result Name</span>
                    <span class="info-value">PREMIUM</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Source Segment</span>
                    <span class="info-value">Intent Router</span>
                </div>
                <div class="info-row" style="border-bottom: none;">
                    <span class="info-label">Context Variable</span>
                    <span class="info-value">customerType</span>
                </div>

                <h3>üìç Routing Paths</h3>
                <p style="font-size: 12px; color: #7f8c8d; margin-bottom: 12px;">
                    Routes are evaluated based on the runtime value of <code style="background: #f8f9fa; padding: 2px 6px; border-radius: 3px;">context.customerType</code>
                </p>

                <div class="context-route">
                    <div class="context-key">
                        <span class="icon">üìä</span>
                        <span>RESI_STANDARD</span>
                    </div>
                    <div class="context-target">‚Üí Residential Flow</div>
                </div>

                <div class="context-route">
                    <div class="context-key">
                        <span class="icon">üìä</span>
                        <span>PROF_STANDARD</span>
                    </div>
                    <div class="context-target">‚Üí Professional Flow</div>
                </div>

                <div class="context-route">
                    <div class="context-key">
                        <span class="icon">üìä</span>
                        <span>ENTERPRISE</span>
                    </div>
                    <div class="context-target">‚Üí Enterprise Flow</div>
                </div>

                <div class="context-route default">
                    <div class="context-key">
                        <span class="icon">üîÑ</span>
                        <span>default (fallback)</span>
                    </div>
                    <div class="context-target">‚Üí General Premium Flow</div>
                </div>

                <h3>‚öôÔ∏è Configuration</h3>
                <div style="background: #f8f9fa; padding: 12px; border-radius: 6px; font-size: 12px; font-family: 'Courier New', monospace; color: #2c3e50;">
                    <pre style="margin: 0; line-height: 1.6;">{
  "resultName": "PREMIUM",
  "contextRouting": {
    "contextVar": "customerType",
    "routes": {
      "RESI_STANDARD": "residential_flow",
      "PROF_STANDARD": "professional_flow",
      "ENTERPRISE": "enterprise_flow"
    },
    "default": "general_premium_flow"
  }
}</pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple interactivity
        const premiumTransition = document.getElementById('premiumTransition');
        const sidePanel = document.getElementById('sidePanel');

        // Click on PREMIUM transition to toggle panel
        premiumTransition.addEventListener('click', function(e) {
            e.stopPropagation();
            sidePanel.classList.toggle('hidden');
        });

        // Close panel when clicking outside
        document.addEventListener('click', function(e) {
            if (!sidePanel.contains(e.target) && !premiumTransition.contains(e.target)) {
                // Don't hide for demo purposes
                // sidePanel.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
